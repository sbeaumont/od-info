{% extends "odinfo-base.html" %}
{% block title %}Town Crier{% endblock %}

{% block extrascripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.css" />
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.min.css"/>
<script src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js"></script>
{% endblock %}

{% block content %}
<div class="w3-container">
  <a href="/towncrier?update=true">Update</a>
  <table id="towncrier_table" class="w3-table w3-striped-dark w3-bordered w3-border w3-hoverable">
      <thead>
          <tr class="w3-black">
              <th>Event</th>
              <th>Origin</th>
              <th>Origin Name</th>
              <th>Target</th>
              <th>Target Name</th>
              <th>Amount</th>
              <th>Text</th>
              <th>Timestamp</th>
          </tr>
      </thead>
      <tbody>
      {% for event in towncrier %}
      <tr>
          <td>{{ event.event_type }}</td>
          <td>{{ event.origin }}</td>
          <td>{{ event.origin_name }}</td>
          <td>{{ event.target }}</td>
          <td>{{ event.target_name }}</td>
          <td>{{ event.amount }}</td>
          <td>{{ event.text }}</td>
          <td>{{ event.timestamp }}</td>
      </tr>
      {% endfor %}
      </tbody>
  </table><br>
</div>

<script>
    $(document).ready(function() {
        $('#towncrier_table').DataTable({
            paging: false,
            ordering: false,
            fixedHeader: {
                header: true,
                headerOffset: 43
            }
        });
    });
</script>
{% endblock %}